{"version":3,"sources":["../src/useUploadThing.ts","../src/utils/useEvent.ts","../src/utils/useFetch.ts","../src/use-dropzone/index.tsx","../src/use-dropzone/utils.ts"],"sourcesContent":["import { useRef, useState } from \"react\";\n\nimport { UploadThingError } from \"@uploadthing/shared\";\nimport type { UploadFileResponse } from \"uploadthing/client\";\nimport {\n  DANGEROUS__uploadFiles,\n  getFullApiUrl,\n  INTERNAL_DO_NOT_USE__fatalClientError,\n} from \"uploadthing/client\";\nimport type {\n  DistributiveOmit,\n  FileRouter,\n  inferEndpointInput,\n  inferEndpointOutput,\n  inferErrorShape,\n} from \"uploadthing/server\";\n\nimport type { EndpointMetadata } from \"./types\";\nimport { useEvent } from \"./utils/useEvent\";\nimport useFetch from \"./utils/useFetch\";\n\ndeclare const globalThis: {\n  __UPLOADTHING?: EndpointMetadata;\n};\n\nconst useEndpointMetadata = (url: URL, endpoint: string) => {\n  const maybeServerData = globalThis.__UPLOADTHING;\n  const { data } = useFetch<EndpointMetadata>(\n    // Don't fetch if we already have the data\n    maybeServerData ? undefined : url.href,\n  );\n  return (maybeServerData ?? data)?.find((x) => x.slug === endpoint);\n};\n\nexport type UseUploadthingProps<\n  TRouter extends FileRouter,\n  TEndpoint extends keyof TRouter,\n> = {\n  onClientUploadComplete?: (\n    res: UploadFileResponse<inferEndpointOutput<TRouter[TEndpoint]>>[],\n  ) => void;\n  onUploadProgress?: (p: number) => void;\n  onUploadError?: (e: UploadThingError<inferErrorShape<TRouter>>) => void;\n  onUploadBegin?: (fileName: string) => void;\n  onBeforeUploadBegin?: (files: File[]) => Promise<File[]> | File[];\n};\n\nexport const INTERNAL_uploadthingHookGen = <\n  TRouter extends FileRouter,\n>(initOpts: {\n  /**\n   * URL to the UploadThing API endpoint\n   * @example URL { http://localhost:3000/api/uploadthing }\n   * @example URL { https://www.example.com/api/uploadthing }\n   */\n  url: URL;\n}) => {\n  const useUploadThing = <TEndpoint extends keyof TRouter>(\n    endpoint: TEndpoint,\n    opts?: UseUploadthingProps<TRouter, TEndpoint>,\n  ) => {\n    const [isUploading, setUploading] = useState(false);\n    const uploadProgress = useRef(0);\n    const fileProgress = useRef<Map<string, number>>(new Map());\n\n    const permittedFileInfo = useEndpointMetadata(\n      initOpts.url,\n      endpoint as string,\n    );\n\n    type InferredInput = inferEndpointInput<TRouter[typeof endpoint]>;\n    type FuncInput = undefined extends InferredInput\n      ? [files: File[], input?: undefined]\n      : [files: File[], input: InferredInput];\n\n    const startUpload = useEvent(async (...args: FuncInput) => {\n      const files = (await opts?.onBeforeUploadBegin?.(args[0])) ?? args[0];\n      const input = args[1];\n\n      setUploading(true);\n      opts?.onUploadProgress?.(0);\n      try {\n        const res = await DANGEROUS__uploadFiles<TRouter, TEndpoint>(endpoint, {\n          files,\n          input,\n          onUploadProgress: (progress) => {\n            if (!opts?.onUploadProgress) return;\n            fileProgress.current.set(progress.file, progress.progress);\n            let sum = 0;\n            fileProgress.current.forEach((p) => {\n              sum += p;\n            });\n            const averageProgress =\n              Math.floor(sum / fileProgress.current.size / 10) * 10;\n            if (averageProgress !== uploadProgress.current) {\n              opts?.onUploadProgress?.(averageProgress);\n              uploadProgress.current = averageProgress;\n            }\n          },\n          onUploadBegin({ file }) {\n            if (!opts?.onUploadBegin) return;\n\n            opts.onUploadBegin(file);\n          },\n          url: initOpts.url,\n        });\n\n        opts?.onClientUploadComplete?.(res);\n        return res;\n      } catch (e) {\n        let error: UploadThingError<inferErrorShape<TRouter>>;\n        if (e instanceof UploadThingError) {\n          error = e as UploadThingError<inferErrorShape<TRouter>>;\n        } else {\n          error = INTERNAL_DO_NOT_USE__fatalClientError(e as Error);\n          console.error(\n            \"Something went wrong. Please contact UploadThing and provide the following cause:\",\n            error.cause instanceof Error ? error.cause.toString() : error.cause,\n          );\n        }\n        opts?.onUploadError?.(error);\n      } finally {\n        setUploading(false);\n        fileProgress.current = new Map();\n        uploadProgress.current = 0;\n      }\n    });\n\n    return {\n      startUpload,\n      isUploading,\n      permittedFileInfo,\n    } as const;\n  };\n\n  return useUploadThing;\n};\n\nexport const generateReactHelpers = <TRouter extends FileRouter>(initOpts?: {\n  /**\n   * URL to the UploadThing API endpoint\n   * @example \"/api/uploadthing\"\n   * @example \"https://www.example.com/api/uploadthing\"\n   *\n   * If relative, host will be inferred from either the `VERCEL_URL` environment variable or `window.location.origin`\n   *\n   * @default (VERCEL_URL ?? window.location.origin) + \"/api/uploadthing\"\n   */\n  url?: string | URL;\n}) => {\n  const url =\n    initOpts?.url instanceof URL ? initOpts.url : getFullApiUrl(initOpts?.url);\n\n  return {\n    useUploadThing: INTERNAL_uploadthingHookGen<TRouter>({ url }),\n    uploadFiles: <TEndpoint extends keyof TRouter>(\n      endpoint: TEndpoint,\n      opts: DistributiveOmit<\n        Parameters<typeof DANGEROUS__uploadFiles<TRouter, TEndpoint>>[1],\n        \"url\"\n      >,\n    ) =>\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      DANGEROUS__uploadFiles<TRouter, TEndpoint>(endpoint, {\n        ...opts,\n        url,\n      } as any),\n  } as const;\n};\n\nexport type FullFile = {\n  file: File;\n  contents: string;\n};\n","// Ripped from https://github.com/scottrippey/react-use-event-hook\nimport React from \"react\";\n\ntype AnyFunction = (...args: any[]) => any;\nconst noop = () => void 0;\n\n/**\n * Suppress the warning when using useLayoutEffect with SSR. (https://reactjs.org/link/uselayouteffect-ssr)\n * Make use of useInsertionEffect if available.\n */\nconst useInsertionEffect =\n  typeof window !== \"undefined\"\n    ? // useInsertionEffect is available in React 18+\n      React.useInsertionEffect || React.useLayoutEffect\n    : noop;\n\n/**\n * Similar to useCallback, with a few subtle differences:\n * - The returned function is a stable reference, and will always be the same between renders\n * - No dependency lists required\n * - Properties or state accessed within the callback will always be \"current\"\n */\nexport function useEvent<TCallback extends AnyFunction>(\n  callback: TCallback,\n): TCallback {\n  // Keep track of the latest callback:\n  const latestRef = React.useRef<TCallback>(\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n    useEvent_shouldNotBeInvokedBeforeMount as any,\n  );\n  useInsertionEffect(() => {\n    latestRef.current = callback;\n  }, [callback]);\n\n  // Create a stable callback that always calls the latest callback:\n  // using useRef instead of useCallback avoids creating and empty array on every render\n  const stableRef = React.useRef<TCallback>();\n  if (!stableRef.current) {\n    stableRef.current = function (this: any) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return, prefer-rest-params, @typescript-eslint/no-unsafe-argument\n      return latestRef.current.apply(this, arguments as any);\n    } as TCallback;\n  }\n\n  return stableRef.current;\n}\n\n/**\n * Render methods should be pure, especially when concurrency is used,\n * so we will throw this error if the callback is called while rendering.\n */\nfunction useEvent_shouldNotBeInvokedBeforeMount() {\n  throw new Error(\n    \"INVALID_USEEVENT_INVOCATION: the callback from useEvent cannot be invoked before the component has mounted.\",\n  );\n}\n","// Ripped from https://usehooks-ts.com/react-hook/use-fetch\nimport { useEffect, useReducer, useRef } from \"react\";\n\nimport { safeParseJSON } from \"@uploadthing/shared\";\n\ninterface State<T> {\n  data?: T;\n  error?: Error;\n}\n\ntype Cache<T> = Record<string, T>;\n\n// discriminated union type\ntype Action<T> =\n  | { type: \"loading\" }\n  | { type: \"fetched\"; payload: T }\n  | { type: \"error\"; payload: Error };\n\nfunction useFetch<T = unknown>(url?: string, options?: RequestInit): State<T> {\n  const cache = useRef<Cache<T>>({});\n\n  // Used to prevent state update if the component is unmounted\n  const cancelRequest = useRef<boolean>(false);\n\n  const initialState: State<T> = {\n    error: undefined,\n    data: undefined,\n  };\n\n  // Keep state logic separated\n  const fetchReducer = (state: State<T>, action: Action<T>): State<T> => {\n    switch (action.type) {\n      case \"loading\":\n        return { ...initialState };\n      case \"fetched\":\n        return { ...initialState, data: action.payload };\n      case \"error\":\n        return { ...initialState, error: action.payload };\n      default:\n        return state;\n    }\n  };\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n\n  useEffect(() => {\n    // Do nothing if the url is not given\n    if (!url) return;\n\n    cancelRequest.current = false;\n\n    const fetchData = async () => {\n      dispatch({ type: \"loading\" });\n\n      // If a cache exists for this url, return it\n      if (cache.current[url]) {\n        dispatch({ type: \"fetched\", payload: cache.current[url] });\n        return;\n      }\n\n      try {\n        const response = await fetch(url, options);\n        if (!response.ok) {\n          throw new Error(response.statusText);\n        }\n\n        const dataOrError = await safeParseJSON<T>(response);\n        if (dataOrError instanceof Error) {\n          throw dataOrError;\n        }\n\n        cache.current[url] = dataOrError;\n        if (cancelRequest.current) return;\n\n        dispatch({ type: \"fetched\", payload: dataOrError });\n      } catch (error) {\n        if (cancelRequest.current) return;\n\n        dispatch({ type: \"error\", payload: error as Error });\n      }\n    };\n\n    void fetchData();\n\n    // Use the cleanup function for avoiding a possibly...\n    // ...state update after the component was unmounted\n    return () => {\n      cancelRequest.current = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [url]);\n\n  return state;\n}\n\nexport default useFetch;\n","/**\n * This is a forked version of the react-dropzone package.\n * See original source here: https://github.com/react-dropzone/react-dropzone\n * The original package is licensed under the MIT license.\n */\n\nimport type React from \"react\";\nimport {\n  createRef,\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n} from \"react\";\nimport { fromEvent } from \"file-selector\";\n\nimport type {\n  DropEvent,\n  DropzoneMethods,\n  DropzoneOptions,\n  DropzoneState,\n  FileError,\n  FileRejection,\n} from \"./types\";\nimport {\n  acceptPropAsAcceptAttr,\n  allFilesAccepted,\n  canUseFileSystemAccessAPI,\n  composeEventHandlers,\n  ErrorCode,\n  fileAccepted,\n  fileMatchSize,\n  isAbort,\n  isEvtWithFiles,\n  isIeOrEdge,\n  isPropagationStopped,\n  isSecurityError,\n  onDocumentDragOver,\n  pickerOptionsFromAccept,\n} from \"./utils\";\n\nexport * from \"./types\";\n\nconst initialState: DropzoneState = {\n  isFocused: false,\n  isFileDialogActive: false,\n  isDragActive: false,\n  isDragAccept: false,\n  isDragReject: false,\n  acceptedFiles: [],\n  fileRejections: [],\n  rootRef: createRef<HTMLElement>(),\n  inputRef: createRef<HTMLInputElement>(),\n};\n\n/**\n * A React hook that creates a drag 'n' drop area.\n *\n * ### Example\n *\n * ```tsx\n * function MyDropzone() {\n *   const { getRootProps, getInputProps } = useDropzone({\n *     onDrop: acceptedFiles => {\n *       // do something with the File objects, e.g. upload to some server\n *     }\n *   });\n *\n *   return (\n *     <div {...getRootProps()}>\n *       <input {...getInputProps()} />\n *       <p>Drag and drop some files here, or click to select files</p>\n *     </div>\n *   )\n * }\n * ```\n */\nexport function useDropzone(\n  props: DropzoneOptions,\n): DropzoneState & DropzoneMethods {\n  const {\n    accept,\n    disabled = false,\n    getFilesFromEvent = fromEvent,\n    maxSize = Number.POSITIVE_INFINITY,\n    minSize = 0,\n    multiple = true,\n    maxFiles = 0,\n    onDragEnter,\n    onDragLeave,\n    onDragOver,\n    onDrop,\n    onDropAccepted,\n    onDropRejected,\n    onFileDialogCancel,\n    onFileDialogOpen,\n    useFsAccessApi,\n    autoFocus,\n    preventDropOnDocument = true,\n    noClick = false,\n    noKeyboard = false,\n    noDrag = false,\n    noDragEventsBubbling = false,\n    onError,\n    validator = null,\n  } = props;\n\n  const acceptAttr = useMemo(() => acceptPropAsAcceptAttr(accept), [accept]);\n  const pickerTypes = useMemo(() => pickerOptionsFromAccept(accept), [accept]);\n\n  const onFileDialogOpenCb = useMemo(\n    () => (typeof onFileDialogOpen === \"function\" ? onFileDialogOpen : noop),\n    [onFileDialogOpen],\n  );\n  const onFileDialogCancelCb = useMemo(\n    () =>\n      typeof onFileDialogCancel === \"function\" ? onFileDialogCancel : noop,\n    [onFileDialogCancel],\n  );\n\n  const rootRef = useRef<HTMLElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { isFocused, isFileDialogActive } = state;\n\n  const fsAccessApiWorksRef = useRef(\n    typeof window !== \"undefined\" &&\n      window.isSecureContext &&\n      useFsAccessApi &&\n      canUseFileSystemAccessAPI(),\n  );\n\n  // Update file dialog active state when the window is focused on\n  const onWindowFocus = () => {\n    // Execute the timeout only if the file dialog is opened in the browser\n    if (!fsAccessApiWorksRef.current && isFileDialogActive) {\n      setTimeout(() => {\n        if (inputRef.current) {\n          const { files } = inputRef.current;\n\n          if (!files?.length) {\n            dispatch({ type: \"closeDialog\" });\n            onFileDialogCancelCb();\n          }\n        }\n      }, 300);\n    }\n  };\n  useEffect(() => {\n    window.addEventListener(\"focus\", onWindowFocus, false);\n    return () => {\n      window.removeEventListener(\"focus\", onWindowFocus, false);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [inputRef, isFileDialogActive, onFileDialogCancelCb, fsAccessApiWorksRef]);\n\n  const dragTargetsRef = useRef<EventTarget[]>([]);\n  const onDocumentDrop = (event: DropEvent) => {\n    if (rootRef.current?.contains(event.target as Node)) {\n      // If we intercepted an event for our instance, let it propagate down to the instance's onDrop handler\n      return;\n    }\n    event.preventDefault();\n    dragTargetsRef.current = [];\n  };\n\n  useEffect(() => {\n    if (preventDropOnDocument) {\n      document.addEventListener(\"dragover\", onDocumentDragOver, false);\n      document.addEventListener(\"drop\", onDocumentDrop, false);\n    }\n\n    return () => {\n      if (preventDropOnDocument) {\n        document.removeEventListener(\"dragover\", onDocumentDragOver);\n        document.removeEventListener(\"drop\", onDocumentDrop);\n      }\n    };\n  }, [rootRef, preventDropOnDocument]);\n\n  // Auto focus the root when autoFocus is true\n  useEffect(() => {\n    if (!disabled && autoFocus && rootRef.current) {\n      rootRef.current.focus();\n    }\n    return noop;\n  }, [rootRef, autoFocus, disabled]);\n\n  const onErrCb = useCallback(\n    (e: Error) => {\n      if (onError) {\n        onError(e);\n      } else {\n        // Let the user know something's gone wrong if they haven't provided the onError cb.\n        console.error(e);\n      }\n    },\n    [onError],\n  );\n\n  const onDragEnterCb = useCallback(\n    (event: React.DragEvent<HTMLElement>) => {\n      event.preventDefault();\n      // Persist here because we need the event later after getFilesFromEvent() is done\n      event.persist();\n      stopPropagation(event);\n\n      dragTargetsRef.current = [...dragTargetsRef.current, event.target];\n\n      if (isEvtWithFiles(event)) {\n        Promise.resolve(getFilesFromEvent(event))\n          .then((files) => {\n            if (isPropagationStopped(event) && !noDragEventsBubbling) {\n              return;\n            }\n\n            const fileCount = files.length;\n            const isDragAccept =\n              fileCount > 0 &&\n              allFilesAccepted({\n                files: files as File[],\n                accept: acceptAttr!,\n                minSize,\n                maxSize,\n                multiple,\n                maxFiles,\n                validator: validator!,\n              });\n            const isDragReject = fileCount > 0 && !isDragAccept;\n\n            dispatch({\n              type: \"setDraggedFiles\",\n              payload: {\n                isDragAccept,\n                isDragReject,\n                isDragActive: true,\n              },\n            });\n\n            if (onDragEnter) {\n              onDragEnter(event);\n            }\n          })\n          .catch(onErrCb);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      getFilesFromEvent,\n      onDragEnter,\n      onErrCb,\n      noDragEventsBubbling,\n      acceptAttr,\n      minSize,\n      maxSize,\n      multiple,\n      maxFiles,\n      validator,\n    ],\n  );\n\n  const onDragOverCb = useCallback(\n    (event: React.DragEvent<HTMLElement>) => {\n      event.preventDefault();\n\n      event.persist();\n      stopPropagation(event);\n\n      const hasFiles = isEvtWithFiles(event);\n      if (hasFiles && \"dataTransfer\" in event && event.dataTransfer !== null) {\n        try {\n          event.dataTransfer.dropEffect = \"copy\";\n        } catch {} /* eslint-disable-line no-empty */\n      }\n\n      if (hasFiles && onDragOver) {\n        onDragOver(event);\n      }\n\n      return false;\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [onDragOver, noDragEventsBubbling],\n  );\n\n  const onDragLeaveCb = useCallback(\n    (event: React.DragEvent<HTMLElement>) => {\n      event.preventDefault();\n      event.persist();\n      stopPropagation(event);\n\n      // Only deactivate once the dropzone and all children have been left\n      const targets = dragTargetsRef.current.filter((target) =>\n        rootRef.current?.contains(target as Node),\n      );\n      // Make sure to remove a target present multiple times only once\n      // (Firefox may fire dragenter/dragleave multiple times on the same element)\n      const targetIdx = targets.indexOf(event.target);\n      if (targetIdx !== -1) {\n        targets.splice(targetIdx, 1);\n      }\n      dragTargetsRef.current = targets;\n      if (targets.length > 0) {\n        return;\n      }\n\n      dispatch({\n        type: \"setDraggedFiles\",\n        payload: {\n          isDragActive: false,\n          isDragAccept: false,\n          isDragReject: false,\n        },\n      });\n\n      if (isEvtWithFiles(event) && onDragLeave) {\n        onDragLeave(event);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [rootRef, onDragLeave, noDragEventsBubbling],\n  );\n\n  const setFiles = useCallback(\n    (files: File[], event: DropEvent | null) => {\n      const acceptedFiles: File[] = [];\n      const fileRejections: FileRejection[] = [];\n\n      files.forEach((file) => {\n        const [accepted, acceptError] = fileAccepted(file, acceptAttr!);\n        const [sizeMatch, sizeError] = fileMatchSize(file, minSize, maxSize);\n        const customErrors = validator ? validator(file) : null;\n\n        if (accepted && sizeMatch && !customErrors) {\n          acceptedFiles.push(file);\n        } else {\n          let errors: (FileError | null | boolean)[] = [acceptError, sizeError];\n\n          if (customErrors) {\n            errors = errors.concat(customErrors);\n          }\n\n          fileRejections.push({\n            file,\n            errors: errors.filter((e): e is FileError => !!e),\n          });\n        }\n      });\n\n      if (\n        (!multiple && acceptedFiles.length > 1) ||\n        (multiple && maxFiles >= 1 && acceptedFiles.length > maxFiles)\n      ) {\n        // Reject everything and empty accepted files\n        acceptedFiles.forEach((file) => {\n          fileRejections.push({\n            file,\n            errors: [\n              { code: ErrorCode.TOO_MANY_FILES, message: \"Too many files\" },\n            ],\n          });\n        });\n        acceptedFiles.splice(0);\n      }\n\n      dispatch({\n        type: \"setFiles\",\n        payload: {\n          acceptedFiles,\n          fileRejections,\n        },\n      });\n\n      if (onDrop) {\n        onDrop(acceptedFiles, fileRejections, event!);\n      }\n\n      if (fileRejections.length > 0 && onDropRejected) {\n        onDropRejected(fileRejections, event!);\n      }\n\n      if (acceptedFiles.length > 0 && onDropAccepted) {\n        onDropAccepted(acceptedFiles, event!);\n      }\n    },\n    [\n      dispatch,\n      multiple,\n      acceptAttr,\n      minSize,\n      maxSize,\n      maxFiles,\n      onDrop,\n      onDropAccepted,\n      onDropRejected,\n      validator,\n    ],\n  );\n\n  const onDropCb = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      event.preventDefault();\n      // Persist here because we need the event later after getFilesFromEvent() is done\n      event.persist();\n      stopPropagation(event);\n\n      dragTargetsRef.current = [];\n\n      if (isEvtWithFiles(event)) {\n        Promise.resolve(getFilesFromEvent(event))\n          .then((files) => {\n            if (isPropagationStopped(event) && !noDragEventsBubbling) {\n              return;\n            }\n            setFiles(files as File[], event);\n          })\n          .catch(onErrCb);\n      }\n      dispatch({ type: \"reset\" });\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [getFilesFromEvent, setFiles, onErrCb, noDragEventsBubbling],\n  );\n\n  // Fn for opening the file dialog programmatically\n  const openFileDialog = useCallback(() => {\n    // No point to use FS access APIs if context is not secure\n    // https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts#feature_detection\n    if (fsAccessApiWorksRef.current) {\n      dispatch({ type: \"openDialog\" });\n      onFileDialogOpenCb();\n      // https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n      const opts = {\n        multiple,\n        types: pickerTypes,\n      };\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-unsafe-call\n      (window as any)\n        .showOpenFilePicker(opts)\n        .then((handles: DropEvent) => getFilesFromEvent(handles))\n        .then((files: File[]) => {\n          setFiles(files, null);\n          dispatch({ type: \"closeDialog\" });\n        })\n        .catch((e: Error) => {\n          // AbortError means the user canceled\n          if (isAbort(e)) {\n            onFileDialogCancelCb();\n            dispatch({ type: \"closeDialog\" });\n          } else if (isSecurityError(e)) {\n            fsAccessApiWorksRef.current = false;\n            // CORS, so cannot use this API\n            // Try using the input\n            if (inputRef.current) {\n              inputRef.current.value = \"\";\n              inputRef.current.click();\n            } else {\n              onErrCb(\n                new Error(\n                  \"Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.\",\n                ),\n              );\n            }\n          } else {\n            onErrCb(e);\n          }\n        });\n      return;\n    }\n\n    if (inputRef.current) {\n      dispatch({ type: \"openDialog\" });\n      onFileDialogOpenCb();\n      inputRef.current.value = \"\";\n      inputRef.current.click();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    dispatch,\n    onFileDialogOpenCb,\n    onFileDialogCancelCb,\n    useFsAccessApi,\n    setFiles,\n    onErrCb,\n    pickerTypes,\n    multiple,\n  ]);\n\n  // Cb to open the file dialog when SPACE/ENTER occurs on the dropzone\n  const onKeyDownCb = useCallback(\n    (event: React.KeyboardEvent) => {\n      // Ignore keyboard events bubbling up the DOM tree\n      if (!rootRef.current?.isEqualNode(event.target as Node)) {\n        return;\n      }\n\n      if (\n        (\"key\" in event && (event.key === \" \" || event.key === \"Enter\")) ||\n        (\"keyCode\" in event && (event.keyCode === 32 || event.keyCode === 13))\n      ) {\n        event.preventDefault();\n        openFileDialog();\n      }\n    },\n    [rootRef, openFileDialog],\n  );\n\n  // Update focus state for the dropzone\n  const onFocusCb = useCallback(() => {\n    dispatch({ type: \"focus\" });\n  }, []);\n  const onBlurCb = useCallback(() => {\n    dispatch({ type: \"blur\" });\n  }, []);\n\n  // Cb to open the file dialog when click occurs on the dropzone\n  const onClickCb = useCallback(() => {\n    if (noClick) {\n      return;\n    }\n\n    // In IE11/Edge the file-browser dialog is blocking, therefore, use setTimeout()\n    // to ensure React can handle state changes\n    // See: https://github.com/react-dropzone/react-dropzone/issues/450\n    if (isIeOrEdge()) {\n      setTimeout(openFileDialog, 0);\n    } else {\n      openFileDialog();\n    }\n  }, [noClick, openFileDialog]);\n\n  const composeHandler = (fn: (...args: any[]) => any) => {\n    return disabled ? null : fn;\n  };\n\n  const composeKeyboardHandler = (fn: (...args: any[]) => any) => {\n    return noKeyboard ? null : composeHandler(fn);\n  };\n\n  const composeDragHandler = (fn: (...args: any[]) => any) => {\n    return noDrag ? null : composeHandler(fn);\n  };\n\n  const stopPropagation = (event: DropEvent) => {\n    if (noDragEventsBubbling) {\n      event.stopPropagation();\n    }\n  };\n\n  interface DropzoneRootProps extends React.HTMLAttributes<HTMLElement> {\n    refKey?: string;\n    [key: string]: any;\n  }\n  // @ts-expect-error: FIXME LATER\n  const getRootProps: <T extends DropzoneRootProps>(props?: T) => T = useMemo(\n    () =>\n      // @ts-expect-error - FIXME LATER\n      ({\n        refKey = \"ref\",\n        role,\n        onKeyDown,\n        onFocus,\n        onBlur,\n        onClick,\n        onDragEnter,\n        onDragOver,\n        onDragLeave,\n        onDrop,\n        ...rest\n      } = {}) => ({\n        onKeyDown: composeKeyboardHandler(\n          composeEventHandlers(onKeyDown, onKeyDownCb),\n        ),\n        onFocus: composeKeyboardHandler(\n          composeEventHandlers(onFocus, onFocusCb),\n        ),\n        onBlur: composeKeyboardHandler(composeEventHandlers(onBlur, onBlurCb)),\n        onClick: composeHandler(composeEventHandlers(onClick, onClickCb)),\n        onDragEnter: composeDragHandler(\n          composeEventHandlers(onDragEnter, onDragEnterCb),\n        ),\n        onDragOver: composeDragHandler(\n          composeEventHandlers(onDragOver, onDragOverCb),\n        ),\n        onDragLeave: composeDragHandler(\n          composeEventHandlers(onDragLeave, onDragLeaveCb),\n        ),\n        onDrop: composeDragHandler(composeEventHandlers(onDrop, onDropCb)),\n        role: typeof role === \"string\" && role !== \"\" ? role : \"presentation\",\n        [refKey]: rootRef,\n        ...(!disabled && !noKeyboard ? { tabIndex: 0 } : {}),\n        ...rest,\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      rootRef,\n      onKeyDownCb,\n      onFocusCb,\n      onBlurCb,\n      onClickCb,\n      onDragEnterCb,\n      onDragOverCb,\n      onDragLeaveCb,\n      onDropCb,\n      noKeyboard,\n      noDrag,\n      disabled,\n    ],\n  );\n\n  const onInputElementClick = useCallback((event: React.MouseEvent) => {\n    event.stopPropagation();\n  }, []);\n\n  interface DropzoneInputProps\n    extends React.InputHTMLAttributes<HTMLInputElement> {\n    refKey?: string;\n  }\n  // @ts-expect-error - FIXME LATER\n  const getInputProps: <T extends DropzoneInputProps>(props?: T) => T = useMemo(\n    () =>\n      // @ts-expect-error - FIXME LATER\n      ({ refKey = \"ref\", onChange, onClick, ...rest } = {}) => ({\n        accept: acceptAttr,\n        multiple,\n        type: \"file\",\n        style: { display: \"none\" },\n        onChange: composeHandler(composeEventHandlers(onChange, onDropCb)),\n        onClick: composeHandler(\n          composeEventHandlers(onClick, onInputElementClick),\n        ),\n        tabIndex: -1,\n        [refKey]: inputRef,\n        ...rest,\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [inputRef, accept, multiple, onDropCb, disabled],\n  );\n\n  return {\n    ...state,\n    isFocused: isFocused && !disabled,\n    getRootProps,\n    getInputProps,\n    rootRef,\n    inputRef,\n    open: composeHandler(openFileDialog),\n  };\n}\n\ntype Focus = { type: \"focus\" };\ntype Blur = { type: \"blur\" };\ntype OpenDialog = { type: \"openDialog\" };\ntype CloseDialog = { type: \"closeDialog\" };\ntype SetDraggedFiles = {\n  type: \"setDraggedFiles\";\n  payload: Pick<\n    DropzoneState,\n    \"isDragActive\" | \"isDragAccept\" | \"isDragReject\"\n  >;\n};\ntype SetFiles = {\n  type: \"setFiles\";\n  payload: Pick<DropzoneState, \"acceptedFiles\" | \"fileRejections\">;\n};\ntype Reset = { type: \"reset\" };\ntype DropzoneActions =\n  | Focus\n  | Blur\n  | OpenDialog\n  | CloseDialog\n  | SetDraggedFiles\n  | SetFiles\n  | Reset;\nfunction reducer(state: DropzoneState, action: DropzoneActions): DropzoneState {\n  switch (action.type) {\n    case \"focus\":\n      return {\n        ...state,\n        isFocused: true,\n      };\n    case \"blur\":\n      return {\n        ...state,\n        isFocused: false,\n      };\n    case \"openDialog\":\n      return {\n        ...initialState,\n        isFileDialogActive: true,\n      };\n    case \"closeDialog\":\n      return {\n        ...state,\n        isFileDialogActive: false,\n      };\n    case \"setDraggedFiles\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"setFiles\":\n      return {\n        ...state,\n        ...action.payload,\n      };\n    case \"reset\":\n      return {\n        ...initialState,\n      };\n    default:\n      return state;\n  }\n}\n\nfunction noop() {\n  // noop\n}\n\nexport { ErrorCode } from \"./utils\";\n","import attrAccepts from \"attr-accept\";\n\nimport type { AcceptProp, DropEvent, FileError } from \"./types\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\nconst accepts: typeof attrAccepts =\n  // @ts-expect-error - ESM interop\n  typeof attrAccepts === \"function\" ? attrAccepts : attrAccepts.default;\n\nexport const ErrorCode = {\n  FILE_INVALID_TYPE: \"FILE_INVALID_TYPE\",\n  FILE_TOO_LARGE: \"FILE_TOO_LARGE\",\n  FILE_TOO_SMALL: \"FILE_TOO_SMALL\",\n  TOO_MANY_FILES: \"TOO_MANY_FILES\",\n} as const;\nexport type ErrorCode = (typeof ErrorCode)[keyof typeof ErrorCode];\n\nexport const getInvalidTypeRejectionErr = (accept: string | string[]) => {\n  accept = Array.isArray(accept) && accept.length === 1 ? accept[0] : accept;\n  const messageSuffix = Array.isArray(accept)\n    ? `one of ${accept.join(\", \")}`\n    : accept;\n  return {\n    code: ErrorCode.FILE_INVALID_TYPE,\n    message: `File type must be ${messageSuffix}`,\n  };\n};\n\nexport const getTooLargeRejectionErr = (maxSize: number) => {\n  return {\n    code: ErrorCode.FILE_TOO_LARGE,\n    message: `File is larger than ${maxSize} ${\n      maxSize === 1 ? \"byte\" : \"bytes\"\n    }`,\n  };\n};\n\nexport const getTooSmallRejectionErr = (minSize: number) => {\n  return {\n    code: ErrorCode.FILE_TOO_SMALL,\n    message: `File is smaller than ${minSize} ${\n      minSize === 1 ? \"byte\" : \"bytes\"\n    }`,\n  };\n};\n\n// Firefox versions prior to 53 return a bogus MIME type for every file drag, so dragovers with\n// that MIME type will always be accepted\nexport function fileAccepted(file: File, accept: string | string[]) {\n  const isAcceptable =\n    file.type === \"application/x-moz-file\" || accepts(file, accept);\n  return [\n    isAcceptable,\n    isAcceptable ? null : getInvalidTypeRejectionErr(accept),\n  ];\n}\n\nexport function fileMatchSize(file: File, minSize: number, maxSize: number) {\n  if (isDefined(file.size)) {\n    if (isDefined(minSize) && isDefined(maxSize)) {\n      if (file.size > maxSize) return [false, getTooLargeRejectionErr(maxSize)];\n      if (file.size < minSize) return [false, getTooSmallRejectionErr(minSize)];\n    } else if (isDefined(minSize) && file.size < minSize)\n      return [false, getTooSmallRejectionErr(minSize)];\n    else if (isDefined(maxSize) && file.size > maxSize)\n      return [false, getTooLargeRejectionErr(maxSize)];\n  }\n  return [true, null];\n}\n\nfunction isDefined<T>(value: T | null | undefined): value is T {\n  return value !== undefined && value !== null;\n}\n\nexport function allFilesAccepted({\n  files,\n  accept,\n  minSize,\n  maxSize,\n  multiple,\n  maxFiles,\n  validator,\n}: {\n  files: File[];\n  accept: string | string[];\n  minSize: number;\n  maxSize: number;\n  multiple: boolean;\n  maxFiles: number;\n  validator: (f: File) => FileError | FileError[] | null;\n}) {\n  if (\n    (!multiple && files.length > 1) ||\n    (multiple && maxFiles >= 1 && files.length > maxFiles)\n  ) {\n    return false;\n  }\n\n  return files.every((file) => {\n    const [accepted] = fileAccepted(file, accept);\n    const [sizeMatch] = fileMatchSize(file, minSize, maxSize);\n    const customErrors = validator ? validator(file) : null;\n    return accepted && sizeMatch && !customErrors;\n  });\n}\n\n// React's synthetic events has event.isPropagationStopped,\n// but to remain compatibility with other libs (Preact) fall back\n// to check event.cancelBubble\nexport function isPropagationStopped(event: DropEvent) {\n  if (\n    \"isPropagationStopped\" in event &&\n    typeof event.isPropagationStopped === \"function\"\n  ) {\n    return event.isPropagationStopped();\n  } else if (\n    \"cancelBubble\" in event &&\n    typeof event.cancelBubble !== \"undefined\"\n  ) {\n    return event.cancelBubble;\n  }\n  return false;\n}\n\nexport function isEvtWithFiles(event: DropEvent) {\n  if (!(\"dataTransfer\" in event && event.dataTransfer !== null)) {\n    return !!event.target && \"files\" in event.target && !!event.target.files;\n  }\n  // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/types\n  // https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#file\n  return Array.prototype.some.call(\n    event.dataTransfer.types,\n    (type) => type === \"Files\" || type === \"application/x-moz-file\",\n  );\n}\n\nexport function isKindFile<T>(item: T) {\n  return (\n    typeof item === \"object\" &&\n    item !== null &&\n    \"kind\" in item &&\n    item.kind === \"file\"\n  );\n}\n\n// allow the entire document to be a drag target\nexport function onDocumentDragOver(event: DragEvent) {\n  event.preventDefault();\n}\n\nfunction isIe(userAgent: string) {\n  return (\n    userAgent.indexOf(\"MSIE\") !== -1 || userAgent.indexOf(\"Trident/\") !== -1\n  );\n}\n\nfunction isEdge(userAgent: string) {\n  return userAgent.indexOf(\"Edge/\") !== -1;\n}\n\nexport function isIeOrEdge(userAgent = window.navigator.userAgent) {\n  return isIe(userAgent) || isEdge(userAgent);\n}\n\n/**\n * This is intended to be used to compose event handlers\n * They are executed in order until one of them calls `event.isPropagationStopped()`.\n * Note that the check is done on the first invoke too,\n * meaning that if propagation was stopped before invoking the fns,\n * no handlers will be executed.\n *\n * @param {Function} fns the event hanlder functions\n * @return {Function} the event handler to add to an element\n */\nexport function composeEventHandlers(\n  ...fns: (((...args: any[]) => any) | undefined)[]\n) {\n  return (event: DropEvent, ...args: any[]) =>\n    fns.some((fn) => {\n      if (!isPropagationStopped(event) && fn) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        fn(event, ...args);\n      }\n      return isPropagationStopped(event);\n    });\n}\n\n/**\n * canUseFileSystemAccessAPI checks if the [File System Access API](https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API)\n * is supported by the browser.\n * @returns {boolean}\n */\nexport function canUseFileSystemAccessAPI() {\n  return \"showOpenFilePicker\" in window;\n}\n\n/**\n * Convert the `{accept}` dropzone prop to the\n * `{types}` option for https://developer.mozilla.org/en-US/docs/Web/API/window/showOpenFilePicker\n *\n * @param {AcceptProp} accept\n * @returns {{accept: string[]}[]}\n */\nexport function pickerOptionsFromAccept(accept?: AcceptProp) {\n  if (isDefined(accept)) {\n    const acceptForPicker = Object.entries(accept)\n      .filter(([mimeType, ext]) => {\n        let ok = true;\n\n        if (!isMIMEType(mimeType)) {\n          console.warn(\n            `Skipped \"${mimeType}\" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`,\n          );\n          ok = false;\n        }\n\n        if (!Array.isArray(ext) || !ext.every(isExt)) {\n          console.warn(\n            `Skipped \"${mimeType}\" because an invalid file extension was provided.`,\n          );\n          ok = false;\n        }\n\n        return ok;\n      })\n      .reduce(\n        (agg, [mimeType, ext]) => ({\n          ...agg,\n          [mimeType]: ext,\n        }),\n        {},\n      );\n    return [\n      {\n        // description is required due to https://crbug.com/1264708\n        description: \"Files\",\n        accept: acceptForPicker,\n      },\n    ];\n  }\n  return accept;\n}\n\n/**\n * Convert the `{accept}` dropzone prop to an array of MIME types/extensions.\n * @param {AcceptProp} accept\n * @returns {string}\n */\nexport function acceptPropAsAcceptAttr(accept?: AcceptProp) {\n  if (isDefined(accept)) {\n    return (\n      Object.entries(accept)\n        .reduce<string[]>((a, [mimeType, ext]) => [...a, mimeType, ...ext], [])\n        // Silently discard invalid entries as pickerOptionsFromAccept warns about these\n        .filter((v) => isMIMEType(v) || isExt(v))\n        .join(\",\")\n    );\n  }\n\n  return undefined;\n}\n\n/**\n * Check if v is an exception caused by aborting a request (e.g window.showOpenFilePicker()).\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n */\nexport function isAbort(v: any) {\n  return (\n    v instanceof DOMException &&\n    (v.name === \"AbortError\" || v.code === v.ABORT_ERR)\n  );\n}\n\n/**\n * Check if v is a security error.\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/DOMException.\n */\nexport function isSecurityError(v: any) {\n  return (\n    v instanceof DOMException &&\n    (v.name === \"SecurityError\" || v.code === v.SECURITY_ERR)\n  );\n}\n\n/**\n * Check if v is a MIME type string.\n *\n * See accepted format: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers.\n */\nexport function isMIMEType(v: string) {\n  return (\n    v === \"audio/*\" ||\n    v === \"video/*\" ||\n    v === \"image/*\" ||\n    v === \"text/*\" ||\n    /\\w+\\/[-+.\\w]+/g.test(v)\n  );\n}\n\n/**\n * Check if v is a file extension.\n */\nexport function isExt(v: string) {\n  return /^.*\\.[\\w]+$/.test(v);\n}\n"],"mappings":"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","names":["useRef","initialState","state","useRef","_a","useEffect","useReducer","useRef","noop","useRef","useReducer","useEffect","onDragEnter","onDragOver","onDragLeave","onDrop"]}